#include <avr/io.h>
#include <avr/interrupt.h>
#include <util/delay.h>
void init_timer1();
unsigned char segments[6]={0,0,0,0,0,0};
void display_all();
void fix_all();
void
int main(){
	DDRC |= 0x0F;
	DDRA |= 0b00111111;
	init_timer1();
	while(1){
		fix_all();
		display_all();



	}

}


void init_timer1(){
	SREG |= (1<<7);
	TIMSK |= (1<<OCIE1A);
	TCCR1A = (1<<FOC1A);
	TCNT1=0;
	OCR1A=1000;
	TCCR1B= (1<<WGM12) | (1<<CS12) | (1<<CS10);
}



ISR(TIMER1_COMPA_vect){
	SREG |= (1<<7);
	segments[5]++;
}


void fix_all(){
	if(segments[5]==10){
		segments[5]=0;
		segments[4]++;
	}
	if(segments[4]==6){
		segments[4]=0;
		segments[3]++;
	}
    if(segments[3]==10){
    	segments[3]=0;
    	segments[2]++;

    }
    if(segments[2]==6){
    	segments[2]=0;
    	segments[1]++;
    }
    if(segments[1]==10){
    	segments[1]=0;
    	segments[0]++;
    }
    if(segments[0]==2 && segments[1]==4){
    	for(int i=5;i>=0;i--){
    		segments[i]=0;
    	}


    }
}


void display_all(){
	for(int i=5;i>=0;i--){
		PORTA |= (1<<i);
		PORTC= (PORTC&0xF0) | (segments[i]&0x0F);
		_delay_us(200);
		PORTA &= ~(1<<i);
	}


}

void init_interrupt(){
MCUCR |= (1<<ISC11)	 | (1<<ISC10)




}



